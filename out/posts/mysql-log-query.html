<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"/><link rel="stylesheet" href="/blog-next/style.css"/><title>วีธีเก็บ Log Query ที่ทำงานช้าใน MySql</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="1. Log in เข้าไปยัง Server ด้วย SSH 2. เข้าใช้งาน MySql ด้วย คำสั่ง “mysql -u root -p” 3. พิมพ์ MySQL root password."/><meta name="next-head-count" content="8"/><link rel="preload" href="/blog-next/_next/static/Uu71nu4ag4jtkXWduIxfH/pages/posts/%5Bid%5D.js" as="script"/><link rel="preload" href="/blog-next/_next/static/Uu71nu4ag4jtkXWduIxfH/pages/_app.js" as="script"/><link rel="preload" href="/blog-next/_next/static/runtime/webpack-b65cab0b00afd201cbda.js" as="script"/><link rel="preload" href="/blog-next/_next/static/chunks/framework.98c1b221acb34aa9927b.js" as="script"/><link rel="preload" href="/blog-next/_next/static/chunks/commons.d3a5cad3addbd9214ed4.js" as="script"/><link rel="preload" href="/blog-next/_next/static/runtime/main-27122c53c6c061494a08.js" as="script"/><link rel="preload" href="/blog-next/_next/static/chunks/c774c3ea5c4be212da3d8a8163a7430f3462ebd8.ae85585cef4fc8119d58.js" as="script"/></head><body><div id="__next"><div><div class="py-3 d-flex align-items-center header mb-5"><div class="container"><div class=""><a href="/blog-next"><h1 class="logo"> Open Blog </h1></a></div></div></div><main class="container"><div class="row"><div class="col-9"><div class="post"><h1>วีธีเก็บ Log Query ที่ทำงานช้าใน MySql</h1>
<ol>
<li>Log in เข้าไปยัง Server ด้วย SSH</li>
<li>เข้าใช้งาน MySql ด้วย คำสั่ง “mysql -u root -p”</li>
<li>พิมพ์ MySQL root password.</li>
<li>เปิดใช้งาน slow query log พิมพ์คำสั่งหลัง mysql><pre><code class="language-sql">SET GLOBAL slow_query_log = ‘ON’;
</code></pre></li>
<li>กำหนดเวลาขั้นต่ำที่ต้องการ หากไม่กำหนดค่าเริ่มต้นจะอยู่ที่ 10 วินาที ผมจะกำหนดเป็น 3 วินาที เมื่อรัน Query นาน ≥ 3 วินาที จะเก็บ Query ไว้ใน Log<pre><code class="language-sql">SET GLOBAL long_query_time = 3; 
</code></pre></li>
<li>หนดเวลาตำแหน่งตของ Log หากไม่กำหนดค่าเริ่มต้นจะอยู่ที่ <code>/var/lib/mysql/hostname-slow.log</code><pre><code class="language-sql">SET GLOBAL slow_query_log_file = ‘/path/filename’; 
</code></pre>อ้างอิง: <a href="https://www.a2hosting.com/kb/developer-corner/mysql/enabling-the-slow-query-log-in-mysql">https://www.a2hosting.com/kb/developer-corner/mysql/enabling-the-slow-query-log-in-mysql</a></li>
</ol>
</div></div></div></main></div><footer class="d-flex align-items-center" style="height:8em"><div class="container"><p><a href="mailto:vachirawit.mark@gmail.com" class="text-secondary">vachirawit.mark@gmail.com</a></p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"mysql-log-query","contentHtml":"\u003ch1\u003eวีธีเก็บ Log Query ที่ทำงานช้าใน MySql\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003eLog in เข้าไปยัง Server ด้วย SSH\u003c/li\u003e\n\u003cli\u003eเข้าใช้งาน MySql ด้วย คำสั่ง “mysql -u root -p”\u003c/li\u003e\n\u003cli\u003eพิมพ์ MySQL root password.\u003c/li\u003e\n\u003cli\u003eเปิดใช้งาน slow query log พิมพ์คำสั่งหลัง mysql\u003e\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eSET GLOBAL slow_query_log = ‘ON’;\n\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\n\u003cli\u003eกำหนดเวลาขั้นต่ำที่ต้องการ หากไม่กำหนดค่าเริ่มต้นจะอยู่ที่ 10 วินาที ผมจะกำหนดเป็น 3 วินาที เมื่อรัน Query นาน ≥ 3 วินาที จะเก็บ Query ไว้ใน Log\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eSET GLOBAL long_query_time = 3; \n\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\n\u003cli\u003eหนดเวลาตำแหน่งตของ Log หากไม่กำหนดค่าเริ่มต้นจะอยู่ที่ \u003ccode\u003e/var/lib/mysql/hostname-slow.log\u003c/code\u003e\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eSET GLOBAL slow_query_log_file = ‘/path/filename’; \n\u003c/code\u003e\u003c/pre\u003eอ้างอิง: \u003ca href=\"https://www.a2hosting.com/kb/developer-corner/mysql/enabling-the-slow-query-log-in-mysql\"\u003ehttps://www.a2hosting.com/kb/developer-corner/mysql/enabling-the-slow-query-log-in-mysql\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n","title":"วีธีเก็บ Log Query ที่ทำงานช้าใน MySql","description":"1. Log in เข้าไปยัง Server ด้วย SSH 2. เข้าใช้งาน MySql ด้วย คำสั่ง “mysql -u root -p” 3. พิมพ์ MySQL root password.","date":"2020-05-25"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"mysql-log-query"},"buildId":"Uu71nu4ag4jtkXWduIxfH","assetPrefix":"/blog-next","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/blog-next/_next/static/runtime/polyfills-16ccf9440fd1c9275fd4.js"></script><script async="" data-next-page="/posts/[id]" src="/blog-next/_next/static/Uu71nu4ag4jtkXWduIxfH/pages/posts/%5Bid%5D.js"></script><script async="" data-next-page="/_app" src="/blog-next/_next/static/Uu71nu4ag4jtkXWduIxfH/pages/_app.js"></script><script src="/blog-next/_next/static/runtime/webpack-b65cab0b00afd201cbda.js" async=""></script><script src="/blog-next/_next/static/chunks/framework.98c1b221acb34aa9927b.js" async=""></script><script src="/blog-next/_next/static/chunks/commons.d3a5cad3addbd9214ed4.js" async=""></script><script src="/blog-next/_next/static/runtime/main-27122c53c6c061494a08.js" async=""></script><script src="/blog-next/_next/static/chunks/c774c3ea5c4be212da3d8a8163a7430f3462ebd8.ae85585cef4fc8119d58.js" async=""></script><script src="/blog-next/_next/static/Uu71nu4ag4jtkXWduIxfH/_buildManifest.js" async=""></script><script src="/blog-next/_next/static/Uu71nu4ag4jtkXWduIxfH/_ssgManifest.js" async=""></script></body></html>