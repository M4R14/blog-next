{"version":3,"file":"static/webpack/static/development/pages/index.js.5ec871ee2c05e432d371.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["// import Link from 'next/link'\nimport { parse } from 'node-html-parser';\n\nimport Layout from './../components/Layout';\n\nimport { getAllPostIds, getPostData } from '../lib/posts'\n\nconst Post = ({params}) => {\n  const contentHtml = () => {\n    const root = parse(params.contentHtml);\n    const original_title_str = root.querySelector('h1').toString();\n    const title = root.querySelector('h1');\n    title.set_content(`<a href=\"${process.env.ASSET_PREFIX+ `/posts/${params.id}`}\" >${title.innerHTML}</a>`)\n    console.log('contentHtml',original_title_str, title.toString())\n    return params.contentHtml.replace(original_title_str, title.toString());\n  }\n  return (\n    <div className=\"mb-5\">\n      <div className=\"d-flex w-100 justify-content-end\">\n        <small className=\"text-secondary\" >{params.date}</small>\n      </div>\n      <div className=\"post\" dangerouslySetInnerHTML={{ __html: contentHtml() }} />\n    </div>\n  )\n}\n\nPost.getStaticProps = async ({ params }) => {\n  const postData = await getPostData(params.id)\n  return {\n    props: {\n      postData\n    }\n  }\n}\n\nexport default function Home({ posts }) {\n  return (\n    <Layout>\n      <div>\n        { posts.map(post => Post(post)) }\n      </div>\n      <hr />\n    </Layout>\n  )\n}\n\nexport async function getStaticProps() {\n  let posts = getAllPostIds();\n  posts = posts.sort((a, b) => {\n    var dateA = new Date(a.params.date);\n    var dateB = new Date(b.params.date);\n    return  dateB - dateA;\n  })\n\n  for (let index = 0; index < posts.length; index++) {\n    const post = posts[index];\n    posts[index].params.contentHtml =  (await getPostData(post.params.id)).contentHtml\n  }\n\n  return {\n    props: {\n      posts,\n    }\n  }\n}\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAGA;AACA;AADA;AADA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAQA;AAAA;AACA;AAGA;AAAA;AAKA;;;;A","sourceRoot":""}